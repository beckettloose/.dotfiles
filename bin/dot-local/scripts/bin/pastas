#!/usr/bin/env bash

# Usage: pastas > everything_i_copied.txt
#        pastas | wget -i -
#
# Waits for new content to appear on the clipboard, then sends it to stdout.
# Runs in the background until stopped manually.
#
# borrowed from Evan Hahn

set -e
set -u
set -o pipefail

trap 'exit 0' SIGINT

last_value=''

while true
do
  value="$(pasta)"

  if [ "$last_value" != "$value" ]; then
    echo "$value"
    last_value="$value"
  fi

  sleep 0.1
done
